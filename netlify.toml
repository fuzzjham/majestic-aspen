[build]
command = "sed -i s/DEV_CONTENTFUL_ACCESS_TOKEN_HOLDER/${DEV_CONTENTFUL_ACCESS_TOKEN}/g netlify.toml && npm run build" 
publish = "public"

# Production context:
# All deploys from the main repository branch
# will inherit these settings.
[context.production.environment]
  CONTENTFUL_ACCESS_TOKEN = "PROD_CONTENTFUL_ACCESS_TOKEN_HOLDER"
  CONTENTFUL_ENVIRONMENT="master"

# Deploy Preview context:
# All deploys generated from a pull/merge request
# will inherit these settings.
[context.deploy-preview.environment] 
  CONTENTFUL_ACCESS_TOKEN = "PROD_CONTENTFUL_ACCESS_TOKEN_HOLDER"
  CONTENTFUL_ENVIRONMENT="master"

# Branch deploy context:
# All deploys that are not from a pull/merge request
# or from the production branch will inherit these settings.
[context.branch-deploy]
  CONTENTFUL_ACCESS_TOKEN = "DEV_CONTENTFUL_ACCESS_TOKEN_HOLDER"
  CONTENTFUL_ENVIRONMENT="dev"

[context.dev.environment]
  CONTENTFUL_ACCESS_TOKEN = "DEV_CONTENTFUL_ACCESS_TOKEN_HOLDER"
  CONTENTFUL_ENVIRONMENT="dev"

[context.staging.environment]
  CONTENTFUL_ACCESS_TOKEN = "STAGING_CONTENTFUL_ACCESS_TOKEN_HOLDER"
  CONTENTFUL_ENVIRONMENT="staging"